Readium.Models.OptionsPresenter=Backbone.Model.extend({initialize:function(){var a=this.get("book");if(!a)throw"ebook must be set in the constructor";this.resetOptions();a.on("change:font_size",this.resetOptions,this);a.on("change:two_up",this.resetOptions,this);a.on("change:current_theme",this.resetOptions,this);a.on("change:current_margin",this.resetOptions,this)},applyOptions:function(){var a=this.get("book"),b=this.get("two_up")!==a.get("two_up");a.set({font_size:this.get("font_size"),current_theme:this.get("current_theme"),
current_margin:this.get("current_margin")});b&&a.toggleTwoUp();a.save()},resetOptions:function(){var a=this.get("book");this.set({font_size:a.get("font_size"),two_up:a.get("two_up"),current_theme:a.get("current_theme"),current_margin:a.get("current_margin")})}});
