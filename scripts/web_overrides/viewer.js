Readium.Views.ViewerApplicationView=Backbone.View.extend({el:"#readium-viewer-activity",uiVisible:!1,initialize:function(){this.model.on("change:full_screen",this.toggleFullscreen,this);this.paginator=this.model.CreatePaginator();this.paginator.on("toggle_ui",this.toggleUI,this);this.navWidget=new Readium.Views.NavWidgetView({model:_book});this.navWidget.render();this.toolbar=new Readium.Views.ToolbarView({model:_book});this.toolbar.render();this.model.on("change:has_toc",this.init_toc,this);this.addGlobalEventHandlers()},
toggleUI:function(){},toggleFullscreen:function(){this.model.get("full_screen")?document.documentElement.webkitRequestFullScreen():document.webkitCancelFullScreen()},addGlobalEventHandlers:function(){var a=this.model;window.onresize=function(){a.trigger("repagination_event")};$(document).keydown(function(b){b.which==39&&a.nextPage();b.which==37&&a.prevPage()});a.isFixedLayout?$("#touch-panel"):$(document);$(document).on("swipeleft",function(){a.nextPage()});$(document).on("swiperight",function(){a.prevPage()})},
render:function(){this.toggleUI();var a=this;setTimeout(function(){a.toggleUI()},2E3)},init_toc:function(){if(this.model.get("has_toc")){var a=this.model.getToc();this.toc=a.TocView();a.fetch()}}});
