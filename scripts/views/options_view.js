Readium.Views.OptionsView=Backbone.View.extend({el:"#viewer-settings-modal",initialize:function(){this.model.on("change:current_theme",this.renderTheme,this);this.model.on("change:two_up",this.renderUpMode,this);this.model.on("change:current_margin",this.renderMarginRadio,this);this.model.on("change:font_size",this.renderFontSize,this)},render:function(){this.renderTheme();this.renderUpMode();this.renderMarginRadio();this.renderFontSize();return this},renderTheme:function(){this.$("#preview-text")[0].className=
this.model.get("current_theme");return this},renderUpMode:function(){var a=this.model.get("two_up");this.$("#one-up-option").toggleClass("selected",!a);this.$("#two-up-option").toggleClass("selected",a);return this},renderMarginRadio:function(){var a="#margin-option-"+this.model.get("current_margin");this.$(".margin-radio").toggleClass("selected",!1);this.$(a).toggleClass("selected",!0);return this},renderFontSize:function(){var a=this.model.get("font_size"),b=(a/10).toString()+"em";this.$("#preview-text").css("font-size",
b);this.$("#font-size-input").val(a)},events:{"click .theme-option":"selectTheme","click .margin-radio":"selectMargin","click #cancel-settings-but":"cancelSettings","click #save-settings-but":"applySettings","change #font-size-input":"extractFontSize","click #one-up-option":function(){this.model.set("two_up",!1)},"click #two-up-option":function(){this.model.set("two_up",!0)}},extractFontSize:function(){var a=$("#font-size-input").val(),a=parseInt(a,10);this.model.set("font_size",a)},selectTheme:function(a){a=
a.srcElement.id;a==="default-theme-option"&&this.model.set("current_theme","default-theme");a==="night-theme-option"&&this.model.set("current_theme","night-theme");a==="parchment-theme-option"&&this.model.set("current_theme","parchment-theme");a==="ballard-theme-option"&&this.model.set("current_theme","ballard-theme");a==="vancouver-theme-option"&&this.model.set("current_theme","vancouver-theme")},selectMargin:function(a){a=a.srcElement.id;a=a[a.length-1];a==="1"&&this.model.set("current_margin",
1);a==="2"&&this.model.set("current_margin",2);a==="3"&&this.model.set("current_margin",3);a==="4"&&this.model.set("current_margin",4);a==="5"&&this.model.set("current_margin",5)},cancelSettings:function(){this.$el.modal("hide");this.model.resetOptions()},applySettings:function(){this.model.applyOptions();this.$el.modal("hide")}});
